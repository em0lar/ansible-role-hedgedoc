{
  "production": {
    "loglevel": "{{ codimd_loglevel | default('warn') }}",
    "imageUploadType": "filesystem",
    "allowPDFExport": {{ codimd_allow_pdf_export | bool | lower }},
    "db": {
      "username": "{{ codimd_db_username }}",
      "password": "{{ codimd_db_password }}",
      "database": "{{ codimd_db_database }}",
      "host": "{{ codimd_db_host }}",
      "port": "{{ codimd_db_port }}",
      "dialect": "{{ codimd_db_dialect }}"
    },
    "tmpPath": "/tmp/",
    "docsPath": "./public/docs",
    "viewPath": "./public/views",
    "uploadsPath": "./public/uploads",
    "domain": "{{ codimd_domain }}",
    "port": "{{ codimd_port }}",
    "protocolUseSSL": true,
    "urlAddPort": false,
    "allowOrigin": "{{ codimd_allowed_origins }}",
    "hsts": {
      "enable": {{ codimd_hsts_enable | bool | lower }},
      "maxAgeSeconds": 31536000,
      "includeSubDomains": true,
      "preload": true
    },
    "csp": {
      "enable": true,
      "directives": {
        "scriptSrc": "{{ codimd_domain }}",
        "styleSrc": "{{ codimd_domain }}",
        "fontSrc": "{{ codimd_domain }}"
      },
      "upgradeInsecureRequests": "auto",
      "addDefaults": {{ codimd_csp_enable | bool | lower }}
    },
    "allowAnonymous": {{ codimd_allow_anonymous | bool | lower }},
    "allowAnonymousEdits": {{ codimd_allow_anonymous_edits | bool | lower }},
    "allowFreeURL": {{ codimd_allow_free_url | bool | lower }},
    "defaultPermission": "editable",
    "sessionLife": 1209600000,
    "sessionSecret": "{{ codimd_session_secret }}",
    "email": {{ codimd_allow_email_login | bool | lower }},
    "allowEmailRegister": {{ codimd_allow_email_register | bool | lower  }}
    {% if codimd_saml is defined %},
    "saml": {
      "issuer": "{{ codimd_saml.issuer }}",
      "identifierFormat": "{{ codimd_saml.identifierFormat | default('urn:oasis:names:tc:SAML:1.1:nameid-format:unspecified') }}",
      "idpSsoUrl": "{{ codimd_saml.idpSSOUrl }}",
      "idpCert": "{{ codimd_saml.idpCertPath | default(codimd_base_path + '/idp_cert.pem') }}",
      "attribute": {{ codimd_saml.attributes | default({}) | to_nice_json }}
    }
    {% endif %}
  }
}
